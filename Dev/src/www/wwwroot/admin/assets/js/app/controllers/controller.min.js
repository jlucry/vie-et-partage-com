/*!
 * Wcms (dfide.net)
 * Copyright 2018 DFIDE
 * Licensed under dfide.net
 */

!function(){"use strict";angular.module("app").controller("DocsCtrl",["$scope","$mdSidenav","$timeout","$mdDialog","$location","$rootScope","$log","menu","navs","siteConf","siteConfData","heads","regions",function(t,e,o,n,s,i,r,l,d,u,a,c,g){var p=this;t.Domain=s.host(),t.navs=d,t.regionName=null,g.OnChange=function(e){t.regionName=null==e||null==e.StringValue?null:e.StringValue},t.Conf=null,a.then(function(e){r.debug("DocsCtrl:conf=",e),t.Conf=e,t.Domain=e.Name},function(e){r.debug("DocsCtrl:reason=",e)}),t.searchOpen=!1,t.searchText=null,t.togleSearch=function(){t.searchOpen=0==t.searchOpen},t.executeSearch=function(){c.search=t.searchText,r.debug("Change search text to:",c.search),c.Reload(2)},t.closeSearch=function(){t.searchOpen=!1,t.searchText=null,t.executeSearch()},t.menu=l,t.path=function(){return s.path()},t.goHome=function(e){l.selectPage(null,null),s.path("/")},t.openMenu=function(){o(function(){e("left").open()})},t.closeMenu=function(){o(function(){e("left").close()})},t.isSectionSelected=function(e){var t=!1,o=l.openedSection;o===e?t=!0:e.children&&e.children.forEach(function(e){e===o&&(t=!0)});return t},t.thisYear=(new Date).getFullYear(),i.$on("$locationChangeSuccess",function(){t.closeMenu(),p.autoFocusContent&&(f(),p.autoFocusContent=!1)}),t.focusMainContent=f,Object.defineProperty(i,"relatedPage",{get:function(){return null},set:angular.noop,enumerable:!0,configurable:!0}),i.redirectToUrl=function(e){s.path(e),o(function(){i.relatedPage=null},100)},this.isOpen=function(e){return l.isSectionSelected(e)},this.isSelected=function(e){return l.isPageSelected(e)},this.toggleOpen=function(e){l.toggleSelectSection(e)},this.autoFocusContent=!1;var P=document.querySelector("[role='main']");function f(e){e&&e.preventDefault(),o(function(){P.focus()},90)}}]).controller("HomeCtrl",["$scope","$rootScope",function(e,t){t.currentComponent=t.currentDoc=null}]).controller("GuideCtrl",["$rootScope","$http",function(t,e){t.currentComponent=t.currentDoc=null,t.contributors||e.get("/lib/material-docs-contributors.json").then(function(e){t.github=e.data})}]).controller("LayoutCtrl",["$scope","$attrs","$location","$rootScope",function(e,t,o,n){n.currentComponent=n.currentDoc=null,e.exampleNotEditable=!0,e.layoutDemo={mainAxis:"center",crossAxis:"center",direction:"row"},e.layoutAlign=function(){return e.layoutDemo.mainAxis+(e.layoutDemo.crossAxis?" "+e.layoutDemo.crossAxis:"")}}]).controller("LayoutTipsCtrl",[function(){var t=this;t.toggleButtonText="Hide",t.toggleContentSize=function(){var e=angular.element(document.getElementById("toHide"));e.toggleClass("ng-hide"),t.toggleButtonText=e.hasClass("ng-hide")?"Show":"Hide"}}]).controller("ComponentDocCtrl",["$scope","doc","component","$rootScope",function(e,t,o,n){n.currentComponent=o,n.currentDoc=t}]).controller("DemoCtrl",["$rootScope","$scope","component","demos","$templateRequest",function(e,o,t,n,s){e.currentComponent=t,e.currentDoc=null,o.demos=[],angular.forEach(n,function(e){var t=[e.index].concat(e.js||[]).concat(e.css||[]).concat(e.html||[]);t.forEach(function(t){t.httpPromise=s(t.outputPath).then(function(e){return t.contents=e.replace("<head/>",""),t.contents})}),e.$files=t,o.demos.push(e)}),o.demos=o.demos.sort(function(e,t){return e.name>t.name?1:-1})}])}(),function(){"use strict";function e(s,e,t,o,n,r,i,l,d,u,a,c,g,p,P,f){r.debug("PostsController...");var C=this;function S(e,t){l(e).toggle().then(function(){r.debug("toggle "+t+" is done"),"PostEditSide"==e&&C.Post.get(t)})}function h(e){l(e).close().then(function(){1==C.SidePostOnCloseAction?v():2==C.SidePostOnCloseAction?m():3==C.SidePostOnCloseAction?b():4==C.SidePostOnCloseAction?I():5==C.SidePostOnCloseAction&&E(),C.SidePostOnCloseAction=0})}function v(){var e=C.Posts.getFilterCategory();null==e&&(e=0),e!=C.SelectedCategoryId&&(r.debug("Cat changed to",C.SelectedCategoryId),C.Posts.setFilterCategory(0==C.SelectedCategoryId?null:C.SelectedCategoryId),F(1))}function m(){var e=C.Posts.getFilterTag();null==e&&(e=0),e!=C.SelectedTagId&&(r.debug("Tag changed to",C.SelectedTagId),C.Posts.setFilterTag(0==C.SelectedTagId?null:C.SelectedTagId),F(1))}function b(){var e=C.Posts.getFilterGroup();null==e&&(e=0),e!=C.SelectedGroupId&&(r.debug("Group changed to",C.SelectedGroupId),C.Posts.setFilterGroup(0==C.SelectedGroupId?null:C.SelectedGroupId),F(1))}function I(){C.Posts.getFilterState()!=C.SelectedState&&(r.debug("State changed to",C.SelectedState),C.Posts.setFilterState(C.SelectedState),F(1))}function E(){C.Posts.getFilterMine()!=C.SelectedMine&&(r.debug("Mine changed to",C.SelectedMine),C.Posts.setFilterMine(C.SelectedMine),F(1))}function F(e){C.Navs.LoadStart(),C.Posts.gets(e).then(function(e){if(r.debug("Post reloaded (posts controller)."),0==s.uiRouter){var t=C.Posts.getFilterCategory(),o=C.Posts.getFilterTag(),n=C.Posts.getFilterGroup();r.debug("_reload: cat, tag, group=",t,o,n),C.CurrentPage=C.Posts.currentPage(),C.SelectedCategoryId=null==t?0:t,C.SelectedTagId=null==o?0:o,C.SelectedGroupId=null==n?0:n,r.debug("_reload: cat, tag, group=",C.SelectedCategoryId,C.SelectedTagId,C.SelectedGroupId)}C.Navs.LoadEnd()},function(e){r.error("Failed to reload posts (posts controller)."),C.Navs.LoadEnd()})}C.Heads=a,C.Navs=c,C.Posts=P,C.Post=f,C.StyleTitle=function(e){{if(null!=e&&0==e.State)return"color:blue;";if(null!=e&&2==e.State)return"color:red;"}return""},C.SidePostOpen=S,C.SidePostClose=h,C.DialogSettingsOpen=function(e){S("PostSettingsSide",null)},C.OnPagePrev=function(){r.debug("Load previous posts page..."),C.Posts.setSkip(C.Posts.getSkip()-1),F(0)},C.OnPageChange=function(e){r.debug("Load posts page ",e),C.Posts.setSkip(e),F(0)},C.OnPageNext=function(){r.debug("Load next posts page..."),C.Posts.setSkip(C.Posts.getSkip()+1),F(0)},C.IsAdmin=!1,C.IsPub=!1,C.IsWriter=!1,C.IsContributor=!1,C.SideMaxWidth=1==C.Heads.FullScreen?"100%":"90%",C.ShowFilter=!0,C.CatMarginLeft=function(e){if(null!=e)return 20*e.Deep+"px";return"0px"},C.OnStateClick=function(){C.SidePostOnCloseAction=4,h("PostSettingsSide")},C.OnCategoryClick=function(e){e==C.SelectedCategoryId?C.SelectedCategoryId=0:C.SelectedCategoryId=e;C.SidePostOnCloseAction=1,h("PostSettingsSide")},C.OnTagClick=function(e){e==C.SelectedTagId?C.SelectedTagId=0:C.SelectedTagId=e;C.SidePostOnCloseAction=2,h("PostSettingsSide")},C.OnGroupClick=function(e){e==C.SelectedGroupId?C.SelectedGroupId=0:C.SelectedGroupId=e;C.SidePostOnCloseAction=3,h("PostSettingsSide")},C.OnMineClick=function(e){C.SidePostOnCloseAction=5,h("PostSettingsSide")},C.SidePostOnCloseAction=0,C.Type=1,"calendar"==t.current.params.type&&(C.Type=2),0==s.uiRouter&&(C.CurrentPage=0,C.Cats=null,C.Tags=null,C.Groups=null,C.SelectedCategoryId=0,C.SelectedTagId=0,C.SelectedGroupId=0,C.SelectedState=1,C.SelectedMine=0,C.OnCategoryChange=v,C.OnTagChange=m,C.OnGroupChange=b,C.OnStateChange=I,C.OnMineChange=E,r.debug("PostsController: Waiting site configuration..."),p.then(function(e){C.Cats=g.getClaimCategories(),C.Tags=g.getClaimTags(),C.Groups=g.getClaimGroups(),C.IsAdmin=g.IsAdmin,C.IsPub=g.IsPub,C.IsWriter=g.IsWriter,C.IsContributor=g.IsAdmin||g.IsPub||g.IsWriter,r.debug("IsAdmin, IsPub, IsWriter, IsContributor=",C.IsAdmin,C.IsPub,C.IsWriter,C.IsContributor),C.Posts.onlyValidedPost=!1,C.Posts.gets(3).then(function(e){var t=C.Posts.getFilterCategory(),o=C.Posts.getFilterTag(),n=C.Posts.getFilterGroup(),s=C.Posts.getFilterState(),i=C.Posts.getFilterMine();r.debug("selectedCategory, selectedTag, selectedGroup=",t,o,n),C.SelectedCategoryId=null==t?0:t,C.SelectedTagId=null==o?0:o,C.SelectedGroupId=null==n?0:n,C.SelectedState=null==s?1:s,C.SelectedMine=null==i?0:i,r.debug("cat, tag, group, state, mine=",C.SelectedCategoryId,C.SelectedTagId,C.SelectedGroupId,C.SelectedState,C.SelectedMine)},function(e){})},function(e){})),a.Reload=F,s.$on("$viewContentLoading",function(e,t){r.debug("Posts view loading:",e,t)}),e.$on("$viewContentLoaded",function(e){r.debug("Posts view loaded:",e),C.Navs.LoadEnd()})}angular.module("app.posts").controller("PostsController",e),e.$inject=["$rootScope","$scope","$route","$state","$timeout","$log","$mdDialog","$mdSidenav","$mdBottomSheet","$mdToast","heads","navs","siteConf","siteConfData","posts","post"]}(),function(){"use strict";function e(e,l,t,d,o,u,n,s,a,i,r,c){u.debug("PostEditController...");var g=!1,p="visibility:visible;",P="visibility:hidden;",f=this;function C(){f.Edition=1,f.CoverEditionStyle=P}function S(){u.debug("PostEditController: apply - edt.Edition=",f.Edition),1==f.Edition?(u.debug("PostEditController: applyText"),c.post(1)):2==f.Edition?(u.debug("PostEditController: applyDate"),c.post(2)):3==f.Edition?h():4==f.Edition?function(){if(u.debug("PostEditController: applyFile"),f.CoverEditionStyle=P,f.Progress=0,null!=f.files){for(var e=[],t=0;t<f.files.length;t++)f.files[t].progress=0,f.files[t].error=0,e.push({file:f.files[t],type:0});u.debug("PostEditController: applyCover: covers=",e),c.postFile(e)}}():5==f.Edition&&function(){if(u.debug("PostEditController: applyCover (and cover)"),null!=f.picFile&&null!=f.picFile.name&&null!=f.croppedDataUrl){var e=[];e.push({file:f.picFile,type:1}),e.push({file:a.dataUrltoBlob(f.croppedDataUrl,f.picFile.name),type:2}),u.debug("PostEditController: applyCover: covers=",e),c.postFile(e)}}()}function h(){u.debug("PostEditController: applySettings"),f.Post.State=1==f.Pub?1:0,c.post(3)}function v(){n("PostEditSide").close().then(function(){$("#btnPostsAdd").show(),$("#btnPostsSettings").show(),F(),1==f.ReloadList&&(null!=i.Reload&&i.Reload(0),f.ReloadList=0)})}function m(){u.debug("resetEventField..."),null!=f.Post&&(f.Post.RegistrationFields=[],angular.copy(f.Post.DefaultRegistrationFields,f.Post.RegistrationFields),u.debug("resetEventField:edt.Post.RegistrationFields=",f.Post.RegistrationFields))}function b(){u.debug("enableEvent..."),null!=f.Post&&null==f.Post.RegistrationFields&&m()}function I(){u.debug("addEventField..."),null!=f.Post&&(null==f.Post.RegistrationFields&&(f.Post.RegistrationFields=[]),f.Post.RegistrationFields.push({Name:"",Type:1,Choose:[],Choose2:[]}),u.debug("addEventField:edt.Post.RegistrationFields=",f.Post.RegistrationFields))}function E(e,t){if(u.debug("moveEventField: direction=",e," and index=",t),null!=f.Post&&null!=f.Post.RegistrationFields){var o=f.Post.RegistrationFields.length;if(0<=t&&t<=o-1)if(0==e)f.Post.RegistrationFields.splice(t,1);else if(1==e&&1<=t){var n=f.Post.RegistrationFields[t];f.Post.RegistrationFields[t]=f.Post.RegistrationFields[t-1],f.Post.RegistrationFields[t-1]=n,u.debug("moveEventField:Up->edt.Post.RegistrationFields=",f.Post.RegistrationFields)}else if(-1==e&&t<o-1){n=f.Post.RegistrationFields[t];f.Post.RegistrationFields[t]=f.Post.RegistrationFields[t+1],f.Post.RegistrationFields[t+1]=n,u.debug("moveEventField:Down->edt.Post.RegistrationFields=",f.Post.RegistrationFields)}}}function F(){u.debug("Clean view\\edit post..."),f.Post=null,f.PostImg=!1,f.PostMedia=!1,f.PostMediaVideo=!1,f.PostFiles=!1,f.LoadClass="empty",f.ShowProgress=!0,f.Edition=0,f.CoverEditionStyle=P,f.files=null,f.Error=null,f.picFile=null,f.croppedDataUrl=null,f.CoverProgress=0,f.PostCover=null,f.PostCoverCrop=null,f.TrustedTextContain=null,f.EnableEvent=b,f.ResetEventField=m,f.AddEventField=I,f.MoveEventField=E}function R(){var e;e=null==f.Post||null==f.Post.Id?0:f.Post.Id,F(),0!=e&&c.get(e)}f.Post=null,f.PostCover=null,f.PostCoverCrop=null,f.PostImg=!1,f.PostMedia=!1,f.PostMediaVideo=!1,f.PostFiles=!1,f.LoadClass="ng-hide",f.ShowProgress=!1,f.Edition=0,f.CoverEditionStyle=P,f.Pushing=!1,f.Error=null,f.Pub=!1,f.EditText=C,f.EditDate=function(){f.Edition=2,f.CoverEditionStyle=P},f.EditSettings=function(){f.Edition=3,f.CoverEditionStyle=P},f.EditFile=function(){f.Edition=4,f.CoverEditionStyle=P},f.EditCover=function(){f.Edition=5,f.CoverEditionStyle=p},f.Apply=S,f.Remove=function(){1==f.Edition?(u.debug("PostEditController: removeText"),S()):2==f.Edition?(u.debug("PostEditController: removeDate"),f.Post.StartDate=null,f.Post.StartDateString=null,f.Post.EndDate=null,f.Post.EndDateString=null,c.post(2)):3==f.Edition?(u.debug("PostEditController: removeSettings"),h()):4==f.Edition?function(){u.debug("PostEditController: removeFile"),u.debug("PostEditController: edt.Post.PostMediaVideo=",f.Post.PostMediaVideo),u.debug("PostEditController: edt.Post.PostMedia=",f.Post.PostMedia),u.debug("PostEditController: edt.Post.PostImg=",f.Post.PostImg),u.debug("PostEditController: edt.Post.PostFiles=",f.Post.PostFiles);var e=[];if(null!=f.Post.PostMediaVideo)for(var t=0;t<f.Post.PostMediaVideo.length;t++)1==f.Post.PostMediaVideo[t].checked&&e.push(f.Post.PostMediaVideo[t].Id);if(null!=f.Post.PostMedia)for(var t=0;t<f.Post.PostMedia.length;t++)1==f.Post.PostMedia[t].checked&&e.push(f.Post.PostMedia[t].Id);if(null!=f.Post.PostImg)for(var t=0;t<f.Post.PostImg.length;t++)1==f.Post.PostImg[t].checked&&e.push(f.Post.PostImg[t].Id);if(null!=f.Post.PostFiles)for(var t=0;t<f.Post.PostFiles.length;t++)1==f.Post.PostFiles[t].checked&&e.push(f.Post.PostFiles[t].Id);u.debug("PostEditController: removeCover: covers=",e),c.removeFile(e)}():5==f.Edition&&function(){u.debug("PostEditController: removeCover");var e=[];e.push(0),u.debug("PostEditController: removeCover: covers=",e),c.removeFile(e)}()},f.Close=v,f.Cancel=function(){if(null==f.Post||0==f.Post.Id)return void v();R()},f.CatMarginLeft=function(e){if(null!=e)return 20*e.Deep+"px";return"0px"},f.ReloadList=0,f.CoverProgress=0,f.CoverResult=null,f.CoverErrorMsg=null,f.TrustedTextContain=null,f.SummerOptions={toolbar:[["option1",["fullscreen","codeview","undo","redo"]],["style",["style","bold","italic","underline","clear"]],["para",["ul","ol","paragraph","hr"]],["table",["table"]],["insert",["link","picture","video"]]],lang:"fr-FR",minHeight:null,maxHeight:null,dialogsInBody:!0},c.onLoading=function(e){0==e?(u.debug("OnLoading (edit=false)..."),u.debug("edt.Edition=",f.Edition),4==f.Edition&&0==g||F()):(u.debug("OnLoading (edit=true)..."),f.LoadClass="empty",f.ShowProgress=!0,f.Pushing=!0,f.Error=null)},c.onLoaded=function(e){if(u.debug("OnLoaded (edit = false)..."),u.debug("edt.Edition=",f.Edition),1==e&&4==f.Edition)return void(1==g?R():(u.debug("Reload post to have the updated file list..."),f.files=[],c.get(f.Post.Id)));d(function(){f.LoadClass="ng-hide",f.ShowProgress=!1,f.Pushing=!1,1==g&&1==e&&(u.debug("Stop edition..."),f.Edition=0)},100),f.Post=c.data,0==f.Post.Id?C():(f.PostImg=null!=f.Post.PostImg&&0!=f.Post.PostImg.length,f.PostMedia=null!=f.Post.PostMedia&&0!=f.Post.PostMedia.length,f.PostMediaVideo=null!=f.Post.PostMediaVideo&&0!=f.Post.PostMediaVideo.length,f.PostFiles=null!=f.Post.PostFiles&&0!=f.Post.PostFiles.length,f.Pub=1==f.Post.State);1==e&&(f.ReloadList=1);5==f.Edition&&(f.picFile=null,f.croppedDataUrl=null);f.PostCover=null==f.Post.Cover||""==f.Post.Cover?"":f.Post.Cover+"?ts="+Date.now(),f.PostCoverCrop=null==f.Post.Cover||""==f.Post.Cover?"":f.Post.CoverCrop+"?ts="+Date.now(),f.TrustedTextContain=s.trustAsHtml(f.Post.TextContain),u.debug("TrustedTextContain=",f.TrustedTextContain),null!=f.Post&&1==f.Post.ClaimRegistration&&b()},c.onError=function(e,t){u.debug("Post load failed..."),d(function(){f.LoadClass="ng-hide",f.ShowProgress=!1,f.Pushing=!1},100),u.debug("post.data.Error=",c.data.Error),f.Error=null!=c.data.Error?c.data.Error:"Une erreur s'est produite veuillez r&eacute;essayer ult&eacute;rieurement!",c.data.Error=null,1==e&&(f.ReloadList=1)};l.howToSend=2,f.files=[],f.ProgressBarClass=function(e){return 0!=e.error?"progress-bar-danger":""},l.upload=function(e,t,o){var n,s,i,r;u.debug("$scope.upload..."),l.errorMsg=null,1===l.howToSend?(i=e,r=o,u.debug("uploadUsingUpload..."),i.upload=a.upload({url:"/file/Upload?name="+i.name+"&type="+r,data:i}).then(function(e){u.debug("uploadUsingUpload: Success "+e.config.data.file.name+"uploaded. Response: "+e.data),d(function(){i.result=e.data})},function(e){u.debug("uploadUsingUpload: Error status: "+e.status),0<e.status&&(l.errorMsg=e.status+": "+e.data),i.error=1},function(e){i.progress=Math.min(100,parseInt(100*e.loaded/e.total)),u.debug("uploadUsingUpload: progress: "+i.progress+"% "+e.config.data.file.name)})):2==l.howToSend&&(n=e,s=o,u.debug("uploadUsing$http..."),n.upload=a.http({url:"/file/Upload?name="+n.name+"&type="+s,data:n}),n.upload.then(function(e){n.result=e.data},function(e){0<e.status&&(l.errorMsg=e.status+": "+e.data)}),n.upload.progress(function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},f.isResumeSupported=a.isResumeSupported(),l.restart=function(e){u.debug("$scope.restart..."),e.progress=0,e.error=0,l.upload(e)},l.chunkSize=1e5,l.getReqParams=function(){return u.debug("$scope.getReqParams..."),l.generateErrorOnServer?"?errorCode="+l.serverErrorCode+"&errorMessage="+l.serverErrorMsg:""},angular.element(window).bind("dragover",function(e){u.debug("angular.element(window).bind: dragover..."),e.preventDefault()}),angular.element(window).bind("drop",function(e){u.debug("angular.element(window).drop: dragover..."),e.preventDefault()})}angular.module("app.posts").controller("PostEditController",e),e.$inject=["$rootScope","$scope","$state","$timeout","$location","$log","$mdSidenav","$sce","Upload","heads","siteConf","post"]}(),function(){"use strict";function e(e,t,o,n,s,i,r,l){var d=this;d.Regions=r.gets(),d.Current=r.getCurrent(),d.ChangeRegion=function(e){r.setCurrent(e),d.Current=r.getCurrent(),null!=r.OnChange&&r.OnChange(d.Current);s.debug("Change region to:",d.Current),i.Reload(2)},d.OnChange=null,s.debug("RegionsController: Regions=",d.Regions,", Current=",d.Current),0==e.uiRouter&&(s.debug("RegionsController: Waiting site configuration..."),l.then(function(e){d.Regions=r.gets(),d.Current=r.getCurrent(),null!=r.OnChange&&r.OnChange(d.Current),s.debug("RegionsController:(Wait) Regions=",d.Regions,", Current=",d.Current)},function(e){}))}angular.module("app").controller("RegionsController",e),e.$inject=["$rootScope","$scope","$state","$location","$log","heads","regions","siteConfData"]}(),function(){"use strict";function e(e,t,o,n,s,i,r,l){var d=this;function u(){if(null!=r.data&&(d.UserImg=r.data.UserImg,d.UserName=r.data.UserName,null!=r.data.UserRoles))for(var e=0;e<r.data.UserRoles.length;e++)null!=r.data.UserRoles[e]&&(d.UserGroup+=r.data.UserRoles[e]+" ")}d.UserName="",d.UserGroup="",d.UserImg="",d.Logout=function(){i.location.href="/account/AdminLogOff"},d.Manage=function(){i.location.href="/Manage/Index"},s.debug("UserInfoController: siteConf=",r),u(),0==e.uiRouter&&(s.debug("UserInfoController: Waiting site configuration..."),l.then(function(e){s.debug("UserInfoController:conf=",e),u()},function(e){}))}angular.module("app").controller("UserInfoController",e),e.$inject=["$rootScope","$scope","$state","$location","$log","$window","siteConf","siteConfData"]}(),function(){"use strict";function e(o,e,t,n,s,i,r,l,d,u,a,c,g){s.debug("UsersController...");var p=this;function P(e){r(sId).toggle().then(function(){s.debug("toggle "+e+" is done"),"UserEditSide"==sId&&p.User.get(e)})}function f(){var e=p.Users.getFilterGroup();null==e&&(e=0),e!=p.SelectedGroupId&&(s.debug("Group changed to",p.SelectedGroupId),p.Users.setFilterGroup(0==p.SelectedGroupId?null:p.SelectedGroupId),C(1))}function C(e){p.Navs.LoadStart(),p.Users.gets(e).then(function(e){if(s.debug("User reloaded (users controller)."),0==o.uiRouter){var t=p.Users.getFilterGroup();s.debug("_reload: group=",t),p.CurrentPage=p.Users.currentPage(),p.SelectedGroupId=null==t?0:t,s.debug("_reload: group=",p.SelectedGroupId)}p.Navs.LoadEnd()},function(e){s.error("Failed to reload users (users controller)."),p.Navs.LoadEnd()})}p.Heads=l,p.Navs=d,p.Users=c,p.User=g,p.SideUserOpen=P,p.SideUserClose=function(e){r(e).close().then(function(){1==p.SideUserOnCloseAction||2==p.SideUserOnCloseAction||3==p.SideUserOnCloseAction&&f(),p.SideUserOnCloseAction=0})},p.DialogSettingsOpen=function(e){P("UserSettingsSide")},p.OnPagePrev=function(){s.debug("Load previous users page..."),p.Users.setSkip(p.Users.getSkip()-1),C(0)},p.OnPageChange=function(e){s.debug("Load users page ",e),p.Users.setSkip(e),C(0)},p.OnPageNext=function(){s.debug("Load next users page..."),p.Users.setSkip(p.Users.getSkip()+1),C(0)},p.IsAdmin=!1,p.SideMaxWidth=1==p.Heads.FullScreen?"100%":"90%",p.ShowFilter=!0,p.OnGroupClick=function(e){e==p.SelectedGroupId?p.SelectedGroupId=0:p.SelectedGroupId=e;p.SidePostOnCloseAction=3,sidePostClose("UserSettingsSide")},(p.SideUserOnCloseAction=0)==o.uiRouter&&(p.CurrentPage=0,p.Groups=null,p.SelectedGroupId=0,p.OnGroupChange=f,s.debug("UsersController: Waiting site configuration..."),a.then(function(e){p.Groups=u.getClaimGroups(),p.IsAdmin=u.IsAdmin,s.debug("IsAdmin=",p.IsAdmin),p.Users.onlyValidedUser=!1,p.Users.gets(3).then(function(e){var t=p.Users.getFilterGroup();s.debug("selectedGroup=",t),p.SelectedGroupId=null==t?0:t,s.debug("group=",p.SelectedGroupIdSelectedMine)},function(e){})},function(e){})),l.Reload=C,o.$on("$viewContentLoading",function(e,t){s.debug("Users view loading:",e,t)}),e.$on("$viewContentLoaded",function(e){s.debug("Users view loaded:",e),p.Navs.LoadEnd()})}angular.module("app.users").controller("UsersController",e),e.$inject=["$rootScope","$scope","$state","$timeout","$log","$mdDialog","$mdSidenav","heads","navs","siteConf","siteConfData","users","user"]}();